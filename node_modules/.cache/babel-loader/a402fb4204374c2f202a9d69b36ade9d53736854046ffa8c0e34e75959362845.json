{"ast":null,"code":"import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { db } from \"./firebase\";\nimport { doc, setDoc } from \"firebase/firestore\";\nconst auth = getAuth();\nexport const loginWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n    const userRef = doc(db, \"users\", user.uid);\n    await setDoc(userRef, {\n      role: \"student\"\n    }, {\n      merge: true\n    });\n  } catch (error) {\n    console.error(\"Giriş hatası:\", error);\n  }\n};\nexport const logout = async () => {\n  await signOut(auth);\n};\nexport const checkAuthState = callback => {\n  onAuthStateChanged(auth, callback);\n};","map":{"version":3,"names":["getAuth","GoogleAuthProvider","signInWithPopup","signOut","onAuthStateChanged","db","doc","setDoc","auth","loginWithGoogle","provider","result","user","userRef","uid","role","merge","error","console","logout","checkAuthState","callback"],"sources":["/home/ege/web/src/auth.js"],"sourcesContent":["import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { db } from \"./firebase\";\nimport { doc, setDoc } from \"firebase/firestore\";\n\nconst auth = getAuth();\n\nexport const loginWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    const userRef = doc(db, \"users\", user.uid);\n    await setDoc(userRef, { role: \"student\" }, { merge: true });\n\n  } catch (error) {\n    console.error(\"Giriş hatası:\", error);\n  }\n};\n\nexport const logout = async () => {\n  await signOut(auth);\n};\n\nexport const checkAuthState = (callback) => {\n  onAuthStateChanged(auth, callback);\n};\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,kBAAkB,EAAEC,eAAe,EAAEC,OAAO,EAAEC,kBAAkB,QAAQ,eAAe;AACzG,SAASC,EAAE,QAAQ,YAAY;AAC/B,SAASC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAEhD,MAAMC,IAAI,GAAGR,OAAO,CAAC,CAAC;AAEtB,OAAO,MAAMS,eAAe,GAAG,MAAAA,CAAA,KAAY;EACzC,IAAI;IACF,MAAMC,QAAQ,GAAG,IAAIT,kBAAkB,CAAC,CAAC;IACzC,MAAMU,MAAM,GAAG,MAAMT,eAAe,CAACM,IAAI,EAAEE,QAAQ,CAAC;IACpD,MAAME,IAAI,GAAGD,MAAM,CAACC,IAAI;IAExB,MAAMC,OAAO,GAAGP,GAAG,CAACD,EAAE,EAAE,OAAO,EAAEO,IAAI,CAACE,GAAG,CAAC;IAC1C,MAAMP,MAAM,CAACM,OAAO,EAAE;MAAEE,IAAI,EAAE;IAAU,CAAC,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,CAAC;EAE7D,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;EACvC;AACF,CAAC;AAED,OAAO,MAAME,MAAM,GAAG,MAAAA,CAAA,KAAY;EAChC,MAAMhB,OAAO,CAACK,IAAI,CAAC;AACrB,CAAC;AAED,OAAO,MAAMY,cAAc,GAAIC,QAAQ,IAAK;EAC1CjB,kBAAkB,CAACI,IAAI,EAAEa,QAAQ,CAAC;AACpC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}