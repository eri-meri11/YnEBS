{"ast":null,"code":"import{getAuth,GoogleAuthProvider,signInWithPopup,signOut,onAuthStateChanged}from\"firebase/auth\";import{db}from\"./firebase\";import{doc,setDoc,getDoc}from\"firebase/firestore\";const auth=getAuth();export const loginWithGoogle=async()=>{try{const provider=new GoogleAuthProvider();const result=await signInWithPopup(auth,provider);const user=result.user;const userRef=doc(db,\"users\",user.uid);const userSnap=await getDoc(userRef);if(!userSnap.exists()){await setDoc(userRef,{role:\"student\"});}}catch(error){console.error(\"Giriş hatası:\",error);}};export const logout=async()=>{await signOut(auth);};export const checkAuthState=callback=>{onAuthStateChanged(auth,callback);};","map":{"version":3,"names":["getAuth","GoogleAuthProvider","signInWithPopup","signOut","onAuthStateChanged","db","doc","setDoc","getDoc","auth","loginWithGoogle","provider","result","user","userRef","uid","userSnap","exists","role","error","console","logout","checkAuthState","callback"],"sources":["/home/ege/web/src/auth.js"],"sourcesContent":["import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { db } from \"./firebase\";\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\n\nconst auth = getAuth();\n\nexport const loginWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    const userRef = doc(db, \"users\", user.uid);\n    const userSnap = await getDoc(userRef);\n    \n    if (!userSnap.exists()) {\n      await setDoc(userRef, { role: \"student\" });\n    }\n  } catch (error) {\n    console.error(\"Giriş hatası:\", error);\n  }\n};\n\nexport const logout = async () => {\n  await signOut(auth);\n};\n\nexport const checkAuthState = (callback) => {\n  onAuthStateChanged(auth, callback);\n};\n"],"mappings":"AAAA,OAASA,OAAO,CAAEC,kBAAkB,CAAEC,eAAe,CAAEC,OAAO,CAAEC,kBAAkB,KAAQ,eAAe,CACzG,OAASC,EAAE,KAAQ,YAAY,CAC/B,OAASC,GAAG,CAAEC,MAAM,CAAEC,MAAM,KAAQ,oBAAoB,CAExD,KAAM,CAAAC,IAAI,CAAGT,OAAO,CAAC,CAAC,CAEtB,MAAO,MAAM,CAAAU,eAAe,CAAG,KAAAA,CAAA,GAAY,CACzC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAV,kBAAkB,CAAC,CAAC,CACzC,KAAM,CAAAW,MAAM,CAAG,KAAM,CAAAV,eAAe,CAACO,IAAI,CAAEE,QAAQ,CAAC,CACpD,KAAM,CAAAE,IAAI,CAAGD,MAAM,CAACC,IAAI,CAExB,KAAM,CAAAC,OAAO,CAAGR,GAAG,CAACD,EAAE,CAAE,OAAO,CAAEQ,IAAI,CAACE,GAAG,CAAC,CAC1C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAR,MAAM,CAACM,OAAO,CAAC,CAEtC,GAAI,CAACE,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAE,CACtB,KAAM,CAAAV,MAAM,CAACO,OAAO,CAAE,CAAEI,IAAI,CAAE,SAAU,CAAC,CAAC,CAC5C,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACvC,CACF,CAAC,CAED,MAAO,MAAM,CAAAE,MAAM,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAlB,OAAO,CAACM,IAAI,CAAC,CACrB,CAAC,CAED,MAAO,MAAM,CAAAa,cAAc,CAAIC,QAAQ,EAAK,CAC1CnB,kBAAkB,CAACK,IAAI,CAAEc,QAAQ,CAAC,CACpC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}