{"ast":null,"code":"import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { db } from \"./firebase\";\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\nconst auth = getAuth();\nexport const loginWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n    const userRef = doc(db, \"users\", user.uid);\n    const userSnap = await getDoc(userRef);\n    if (!userSnap.exists()) {\n      await setDoc(userRef, {\n        role: \"teacher\"\n      }); // Varsayılan olarak \"teacher\" ata\n    }\n  } catch (error) {\n    console.error(\"Giriş hatası:\", error);\n  }\n};\nexport const logout = async () => {\n  await signOut(auth);\n};\nexport const checkAuthState = callback => {\n  onAuthStateChanged(auth, callback);\n};","map":{"version":3,"names":["getAuth","GoogleAuthProvider","signInWithPopup","signOut","onAuthStateChanged","db","doc","getDoc","setDoc","auth","loginWithGoogle","provider","result","user","userRef","uid","userSnap","exists","role","error","console","logout","checkAuthState","callback"],"sources":["/home/ege/web/src/auth.js"],"sourcesContent":["import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { db } from \"./firebase\";\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\n\nconst auth = getAuth();\n\nexport const loginWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    const userRef = doc(db, \"users\", user.uid);\n    const userSnap = await getDoc(userRef);\n\n    if (!userSnap.exists()) {\n      await setDoc(userRef, { role: \"teacher\" });  // Varsayılan olarak \"teacher\" ata\n    }\n  } catch (error) {\n    console.error(\"Giriş hatası:\", error);\n  }\n};\n\nexport const logout = async () => {\n  await signOut(auth);\n};\n\nexport const checkAuthState = (callback) => {\n  onAuthStateChanged(auth, callback);\n};\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,kBAAkB,EAAEC,eAAe,EAAEC,OAAO,EAAEC,kBAAkB,QAAQ,eAAe;AACzG,SAASC,EAAE,QAAQ,YAAY;AAC/B,SAASC,GAAG,EAAEC,MAAM,EAAEC,MAAM,QAAQ,oBAAoB;AAExD,MAAMC,IAAI,GAAGT,OAAO,CAAC,CAAC;AAEtB,OAAO,MAAMU,eAAe,GAAG,MAAAA,CAAA,KAAY;EACzC,IAAI;IACF,MAAMC,QAAQ,GAAG,IAAIV,kBAAkB,CAAC,CAAC;IACzC,MAAMW,MAAM,GAAG,MAAMV,eAAe,CAACO,IAAI,EAAEE,QAAQ,CAAC;IACpD,MAAME,IAAI,GAAGD,MAAM,CAACC,IAAI;IAExB,MAAMC,OAAO,GAAGR,GAAG,CAACD,EAAE,EAAE,OAAO,EAAEQ,IAAI,CAACE,GAAG,CAAC;IAC1C,MAAMC,QAAQ,GAAG,MAAMT,MAAM,CAACO,OAAO,CAAC;IAEtC,IAAI,CAACE,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;MACtB,MAAMT,MAAM,CAACM,OAAO,EAAE;QAAEI,IAAI,EAAE;MAAU,CAAC,CAAC,CAAC,CAAE;IAC/C;EACF,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;EACvC;AACF,CAAC;AAED,OAAO,MAAME,MAAM,GAAG,MAAAA,CAAA,KAAY;EAChC,MAAMlB,OAAO,CAACM,IAAI,CAAC;AACrB,CAAC;AAED,OAAO,MAAMa,cAAc,GAAIC,QAAQ,IAAK;EAC1CnB,kBAAkB,CAACK,IAAI,EAAEc,QAAQ,CAAC;AACpC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}